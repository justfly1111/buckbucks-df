interface="lo1";
host.hostname="$name.justfly.live";
path="/jails/services/$name";
ip4.addr=192.168.1.$ip;
mount.fstab="/jails/config/$name.fstab"

ubuntu-jail {
	$ip="102";
	path="/compat/ubuntu";
	exec.clean;
	exec.consolelog="/var/log/${name}_jail.log";
	exec.start="/bin/true";
	exec.stop="/bin/true";
	allow.mount;
	allow.mount.zfs;
	allow.raw_sockets;
	allow.mount.linprocfs;
	allow.mount.linsysfs;
	mount.zfs;
	mount.linprocfs;
	mount.linsysfs;
	allow.chflags;
	allow.mount;
	allow.mount.devfs;
	mount.devfs;
	allow.mount.nullfs;
	allow.sysvipc;
	allow.mount.tmpfs;
	allow.mount.procfs;
	allow.mount.fdescfs;
	devfs_ruleset="9";
	enforce_statfs=1;
	allow.mount.fusefs;
	allow.vmm;
	allow.raw_sockets;
	allow.socket_af;
	allow.vmm;	
	mount.fdescfs;
	persist;
};

buster-jail {
	$ip="103";
	path="/compat/debian-buster";
	exec.clean;
	exec.consolelog="/var/log/${name}_jail.log";
	exec.start="/bin/true";
	exec.stop="/bin/true";
	allow.set_hostname;
	allow.mount;
	allow.mount.zfs;
	allow.mount.fusefs;
	allow.mount.linprocfs;
	allow.mount.linsysfs;
	mount.zfs;
	mount.linprocfs;
	mount.linsysfs;
	allow.chflags;
	allow.mount.devfs;
	mount.devfs;
	allow.mount.nullfs;
	allow.sysvipc;
	allow.mount.tmpfs;
	allow.mount.procfs;
	allow.mount.fdescfs;
	devfs_ruleset="9";
	enforce_statfs=1;
	allow.vmm;
	allow.raw_sockets;
	allow.socket_af;
	mount.fdescfs;
	persist;
};
poudriere {
	$ip="104";
	exec.clean;
	exec.consolelog="/var/log/${name}_jail.log";
	exec.start="/bin/sh /etc/rc";
	exec.stop="/bin/sh /etc/rc.shutdown";
	allow.set_hostname;
	allow.mount;
	allow.mount.devfs;
	allow.mount.zfs;
	mount.devfs;
	mount.zfs;
	allow.chflags;
	allow.mount.fusefs;
	allow.vmm;
	allow.mount.nullfs;
	allow.sysvipc;
	allow.mount.tmpfs;
	allow.mount.procfs;
	allow.mount.fdescfs;
	devfs_ruleset="9";
	enforce_statfs=1;
	allow.raw_sockets;
	allow.socket_af;
	children.max=60;
	mount.fdescfs;
	mount.procfs;
	persist;
};
